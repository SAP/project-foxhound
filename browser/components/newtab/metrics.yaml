# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# Adding a new metric? We have docs for that!
# https://firefox-source-docs.mozilla.org/toolkit/components/glean/user/new_definitions_file.html

---
$schema: moz://mozilla.org/schemas/glean/metrics/2-0-0
$tags:
  - 'Firefox :: New Tab Page'

newtab:
  locale:
    type: string
    description: >
      The application's locale as of when newtab's TelemetryFeed was init.
      Comes from `Services.local.appLocaleAsBCP47`.
      Looks like `en-US`.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1766887
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786670
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1766887
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786670#c3
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
    data_sensitivity:
      - interaction
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    send_in_pings:
      - newtab
    lifetime: application

  newtab_category:
    type: string
    description: >
      The current setting of the newtab page.
      One of ["enabled", "disabled", "extension"] or any value from
      SiteClassifier like "known-hijacker" or "social-media".
      Similar to Activity Stream's PAGE_TAKEOVER_DATA event's
      `newtab_url_category`.
      Sampled once after newtab init.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
    data_sensitivity:
      - technical
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    send_in_pings:
      - newtab
    lifetime: application

  homepage_category:
    type: string
    description: >
      The current setting of the home page.
      One of ["enabled", "disabled", "extension"] or any value from
      SiteClassifier like "known-hijacker" or "social-media".
      Similar to Activity Stream's PAGE_TAKEOVER_DATA event's
      `home_url_category`.
      Sampled once after newtab init.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
    data_sensitivity:
      - technical
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    send_in_pings:
      - newtab
    lifetime: application

  opened:
    type: event
    description: >
      Recorded when newtab UI is opened via `about:newtab` or `about:home` or
      `about:welcome` and has been made visible (see `visibility_event_rcvd_ts`
      in
      [detect-user-session-start.js](https://searchfox.org/mozilla-central/source/browser/components/newtab/content-src/lib/detect-user-session-start.js)).
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1766887
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786670
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1766887
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786670#c3
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
    data_sensitivity:
      - interaction
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: &newtab_visit_id
        description: >
          The id of this newtab visit.
          Allows you to separate multiple simultaneous newtabs and
          build an event timeline of actions taken from this newtab.
        type: string
      source:
        description: >
          The source that opened this newtab.
          One of
            * `about:newtab`
            * `about:home`
            * `about:welcome`
            * `other`
          (See `ONBOARDING_ALLOWED_PAGE_VALUES`).
        type: string
      window_inner_height:
        description: >
          The height of the page window at time of load.
        type: string
      window_inner_width:
        description: >
          The width of the page window at time of load.
        type: string
    send_in_pings:
      - newtab

  closed:
    type: event
    description: >
      Recorded when newtab UI is closed by
      * navigation
      * closing the tab

      Doesn't mean that the newtab was ever visible to a user.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1766887
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786670
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1766887
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786670#c3
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
    data_sensitivity:
      - interaction
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
    send_in_pings:
      - newtab

  blocked_sponsors:
    type: string_list
    description: >
      The advertiser names that have been dismissed by the user.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1828234
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1828234#c1
    data_sensitivity:
      - interaction
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
      - ttran@mozilla.com
    expires: never
    send_in_pings:
      - newtab
    lifetime: application

  sov_allocation:
    type: string_list
    description: >
      The partner group assignment for sov
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1840311
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1840311#c3
    data_sensitivity:
      - technical
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
      - ttran@mozilla.com
    expires: never
    send_in_pings:
      - newtab
    lifetime: application

  tooltip_click:
    type: event
    description: >
      Recorded when a feature highlight tooltip is opened.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1888983
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1888983
    data_sensitivity:
      - interaction
    notification_emails:
      - sdowne@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
      feature:
        description: The feature that was clicked on.
        type: string
    send_in_pings:
      - newtab

  topic_selection_open:
    type: event
    description: >
      Recorded when the topic selection modal is opened
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1896004
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1896004
    data_sensitivity:
      - interaction
    notification_emails:
      - nbarrett@mozilla.com
      - mcrawford@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
    send_in_pings:
      - newtab

  topic_selection_dismiss:
    type: event
    description: >
      Recorded when the topic selection modal is dismissed (topics are not saved)
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1896004
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1896004
    data_sensitivity:
      - interaction
    notification_emails:
      - nbarrett@mozilla.com
      - mcrawford@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
    send_in_pings:
      - newtab

  topic_selection_topics_saved:
    type: event
    description: >
      Recorded when topics are saved from the topics selection modal
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1896004
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1896004
    data_sensitivity:
      - interaction
    notification_emails:
      - nbarrett@mozilla.com
      - mcrawford@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
      topics:
        description: >
          list of topics that were saved by user
        type: string
      previous_topics:
        description: >
          list of previous topics that were saved, an empty string
          means no previous topics were saved
        type: string
      first_save:
        description: >
          whether or not it is the user's first time setting topics
        type: boolean
    send_in_pings:
      - newtab

  selected_topics:
      type: string_list
      description: >
        The list of topics the user selected
      bugs:
        - https://bugzilla.mozilla.org/show_bug.cgi?id=1907152
      data_reviews:
        - https://bugzilla.mozilla.org/show_bug.cgi?id=1907152
      data_sensitivity:
        - interaction
      notification_emails:
        - nbarrett@mozilla.com
        - mcrawford@mozilla.com
      expires: never
      send_in_pings:
        - newtab
      lifetime: application

  wallpaper_click:
    type: event
    description: >
      Recorded when a user clicks on a wallpaper option
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1896004
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1896004
    data_sensitivity:
      - interaction
    notification_emails:
      - nbarrett@mozilla.com
    expires: never
    extra_keys:
      selected_wallpaper:
        description: >
          Which wallpaper has been selected by the user
          Will be the title of a Wallpaper or 'none' for users
          that reset the background to default
        type: string
      had_previous_wallpaper:
        description: >
          Wheather or not user had a previously set wallpaper
        type: boolean
      newtab_visit_id: *newtab_visit_id
    send_in_pings:
      - newtab

  wallpaper_highlight_cta_click:
    type: event
    description: >
      Recorded when a user clicks the CTA on the wallpaper feature highlight
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1900854
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1900854
    data_sensitivity:
      - interaction
    notification_emails:
      - mcrawford@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
    send_in_pings:
      - newtab

  wallpaper_highlight_dismissed:
    type: event
    description: >
      Recorded when a user dismisses the wallpaper feature highlight
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1900854
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1900854
    data_sensitivity:
      - interaction
    notification_emails:
      - mcrawford@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
    send_in_pings:
      - newtab

  wallpaper_category_click:
    type: event
    description: >
      Recorded when a user clicks a wallpaper category option
    bugs:
     - https://bugzilla.mozilla.org/show_bug.cgi?id=1900420
    data_reviews:
     - https://bugzilla.mozilla.org/show_bug.cgi?id=1900420
    data_sensitivity:
      - interaction
    notification_emails:
     - nbarrett@mozilla.com
    expires: never
    extra_keys:
      selected_category:
        description: >
          Which wallpaper category selected by user
        type: string
      newtab_visit_id: *newtab_visit_id
    send_in_pings:
      - newtab

  weather_change_display:
    type: event
    description: >
      Recorded when a user changes the weather display.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1895797
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1895797
    data_sensitivity:
      - interaction
    notification_emails:
      - mcrawford@mozilla.com
    expires: never
    extra_keys:
      weather_display_mode: &weather_display_mode
        description: >
          Which display mode is selected.
        type: string
      newtab_visit_id: *newtab_visit_id
    send_in_pings:
      - newtab

  weather_enabled:
    lifetime: application
    type: boolean
    description: >
      Whether the weather widget is enabled on the newtab.
      Corresponds to the value of the
      `browser.newtabpage.activity-stream.showWeather` pref.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1899340
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1899340
    data_sensitivity:
      - interaction
    notification_emails:
      - mcrawford@mozilla.com
      - sdowne@mozilla.com
    expires: never
    send_in_pings:
      - newtab

  weather_open_provider_url:
    type: event
    description: >
      Recorded when a user opens a link to the Weather provider website.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1895797
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1895797
    data_sensitivity:
      - interaction
    notification_emails:
      - mcrawford@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
    send_in_pings:
      - newtab

  weather_impression:
      type: event
      description: >
        Recorded when the weather widget is viewed
      bugs:
        - https://bugzilla.mozilla.org/show_bug.cgi?id=1898275
      data_reviews:
        - https://bugzilla.mozilla.org/show_bug.cgi?id=1895797
      data_sensitivity:
        - interaction
      notification_emails:
        - mcrawford@mozilla.com
      expires: never
      extra_keys:
        newtab_visit_id: *newtab_visit_id
      send_in_pings:
        - newtab

  weather_load_error:
      type: event
      description: >
        Recorded when the weather widget is not available
      bugs:
        - https://bugzilla.mozilla.org/show_bug.cgi?id=1898275
      data_reviews:
        - https://bugzilla.mozilla.org/show_bug.cgi?id=1895797
      data_sensitivity:
        - interaction
      notification_emails:
        - mcrawford@mozilla.com
      expires: never
      extra_keys:
        newtab_visit_id: *newtab_visit_id
      send_in_pings:
        - newtab

  weather_location_selected:
      type: event
      description: >
        Recorded when a user selects a location for weather widget
      bugs:
        - https://bugzilla.mozilla.org/show_bug.cgi?id=1900103
      data_reviews:
        - https://bugzilla.mozilla.org/show_bug.cgi?id=1900103
      data_sensitivity:
        - interaction
      notification_emails:
        - nbarrett@mozilla.com
      expires: never
      extra_keys:
        newtab_visit_id: *newtab_visit_id
      send_in_pings:
        - newtab

  fakespot_dismiss:
    type: event
    description: >
      Recorded when a user dissmisses TBR fakespot feed
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1924873
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1924873
    data_sensitivity:
      - interaction
    notification_emails:
      - nbarrett@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
    send_in_pings:
      - newtab

  fakespot_about_click:
    type: event
    description: >
      Recorded when a user the 'About Fakespot' link in TBR fakespot feed context menu
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1924873
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1924873
    data_sensitivity:
      - interaction
    notification_emails:
      - nbarrett@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
    send_in_pings:
      - newtab

  fakespot_click:
    type: event
    description: >
      Recorded when a user clicks on a card in TBR fakespot feed
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1924873
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1924873
    data_sensitivity:
      - interaction
    notification_emails:
      - nbarrett@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
      product_id:
        description: >
          id of fakespot product
        type: string
      category:
        description: >
          category of fakespot product
        type: string
    send_in_pings:
      - newtab

  fakespot_product_impression:
    type: event
    description: >
      Recorded when a user triggers an impression on a card in TBR fakespot feed
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1924873
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1924873
    data_sensitivity:
      - interaction
    notification_emails:
      - nbarrett@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
      product_title:
        description: >
          title of fakespot product
        type: string
      product_id:
        description: >
          id of fakespot product
        type: string
      category:
        description: >
          category of fakespot product
        type: string
    send_in_pings:
      - newtab

  fakespot_cta_click:
    type: event
    description: >
      Recorded when a user clicks on the CTA in TBR fakespot feed
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1924873
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1924873
    data_sensitivity:
      - interaction
    notification_emails:
      - nbarrett@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
    send_in_pings:
      - newtab

  fakespot_category:
    type: event
    description: >
      Recorded when a user changes the category in TBR fakespot feed
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1924873
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1924873
    data_sensitivity:
      - interaction
    notification_emails:
      - nbarrett@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
      category:
        description: >
          category that user selected
        type: string
    send_in_pings:
      - newtab

  sections_impression:
    type: event
    description: >
      Recorded when a section is viewport and triggers an impression event
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1927916
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1927916
    data_sensitivity:
      - interaction
    notification_emails:
      - nbarrett@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
      section:
        description: >
          section that had impression event
        type: string
      section_position:
        description: >
          position of section on newtab
        type: string
    send_in_pings:
      - newtab

newtab.search:
  enabled:
    lifetime: application
    type: boolean
    description: >
      Whether the search input is enabled on the newtab.
      Corresponds to the value of the
      `browser.newtabpage.activity-stream.showSearch` pref.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
    data_sensitivity:
      - technical
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    send_in_pings:
      - newtab

newtab.handoff_preference:
  enabled:
    lifetime: application
    type: boolean
    description: >
      Records whether the
      browser.newtabpage.activity-stream.improvesearch.handoffToAwesomebar preference is
      enabled or disabled
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1864496
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1864496
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1892148
    data_sensitivity:
      - interaction
    expires: 137
    notification_emails:
      - fx-search-telemetry@mozilla.com


topsites:
  enabled:
    lifetime: application
    type: boolean
    description: >
      Whether "topsites" is enabled on the newtab.
      AKA the "Shortcuts" section.
      Corresponds to the value of the
      `browser.newtabpage.activity-stream.feeds.topsites` pref.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
    data_sensitivity:
      - technical
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    send_in_pings:
      - newtab

  sponsored_enabled:
    lifetime: application
    type: boolean
    description: >
      Whether sponsored topsites are enabled on the newtab.
      AKA the "Sponsored Shortcuts" section.
      Corresponds to the value of the
      `browser.newtabpage.activity-stream.showSponsoredTopSites` pref.
      Can be `true` even if topsites.enabled is `false`.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
    data_sensitivity:
      - technical
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    send_in_pings:
      - newtab

  impression:
    type: event
    description: >
      Recorded when topsite tiles are loaded.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1766887
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786670
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1820707
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1766887
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786670#c3
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1820707#c3
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1821556#c3
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1824842#c7
    data_sensitivity:
      - interaction
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    extra_keys:
      advertiser_name: &advertiser_name
        description: >
          The name of the advertiser of the tile
        type: string
      tile_id: &tile_id
        description: >
          The tile id of the advertiser provided by Contile. Like `74357`.
        type: quantity
      newtab_visit_id: *newtab_visit_id
      is_sponsored: &is_sponsored
        description: Whether the topsite tile was sponsored.
        type: boolean
      position: &topsite_position
        description: The position (0-index) of the topsite tile.
        type: quantity
    send_in_pings:
      - newtab

  click:
    type: event
    description: >
      Recorded when a topsite tile is clicked.
      Only happens on click. Not on middle-click. Not on "Open in new Tab"-like
      options in the context menu.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1766887
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786670
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1820707
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1766887
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786670#c3
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1820707#c3
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1821556#c3
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1824842#c7
    data_sensitivity:
      - interaction
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    extra_keys:
      advertiser_name: *advertiser_name
      tile_id: *tile_id
      newtab_visit_id: *newtab_visit_id
      is_sponsored: *is_sponsored
      position: *topsite_position
    send_in_pings:
      - newtab

  show_privacy_click:
    type: event
    description: >
      Recorded when the "Our Sponsors and Your Privacy" menu item in the three-
      dots menu of a sponsored topsite is clicked.
      Corresponds to the receipt of a dispatched `ABOUT_SPONSORED_TOP_SITES`
      action by `TelemetryFeed`.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/DENG-1364
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1857324
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1857324
    data_sensitivity: [interaction]
    notification_emails:
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - sbetancourt@mozilla.com
    expires: never
    extra_keys:
      advertiser_name: *advertiser_name
      tile_id: *tile_id
      newtab_visit_id: *newtab_visit_id
      position: *topsite_position
    send_in_pings:
      - newtab

  dismiss:
    type: event
    description: >
      Recorded when the "Dismiss" menu item in the three-dots menu of a topsite
      is clicked.
      Corresponds to the receipt of a dispatched `BLOCK_URL` action by
      `TelemetryFeed`.
      Applies to both sponsored and non-sponsored topsites.
      `advertiser_name` is only provided for sponsored topsites.
    bugs:
      - https://mozilla-hub.atlassian.net/browse/DENG-1363
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1857324
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1857324
    data_sensitivity: [interaction]
    notification_emails:
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - sbetancourt@mozilla.com
      - kdemtchouk@mozilla.com
      - mbowerman@mozilla.com
    expires: never
    extra_keys:
      advertiser_name: *advertiser_name
      tile_id: *tile_id
      newtab_visit_id: *newtab_visit_id
      is_sponsored: *is_sponsored
      position: *topsite_position
    send_in_pings:
      - newtab

  pref_changed:
    type: event
    description: >
      Recorded when specific topsites prefs have changed.

      The list of possible prefs is presently:
       * browser.newtabpage.activity-stream.feeds.topsites
       * browser.newtabpage.activity-stream.showSponsoredTopSites
    bugs:
      - https://mozilla-hub.atlassian.net/browse/D0-1293
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1857324
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1857324
    data_sensitivity: [interaction]
    notification_emails:
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - sbetancourt@mozilla.com
      - kdemtchouk@mozilla.com
      - mbowerman@mozilla.com
    expires: never
    extra_keys:
      pref_name:
        description: The full name of the pref whose value just changed.
        type: string
      new_value:
        description: The new (current) value the pref just changed to.
        type: boolean
    send_in_pings:
      - newtab

  rows:
    lifetime: application
    type: quantity
    unit: integer
    description: >
      The number of topsite tile rows configured to be shown on the newtab
      page. Corresponds to the value of the
      `browser.newtabpage.activity-stream.topSitesRows` pref. This is not the
      number of rows actually seen by the user: if the browser window is
      partially off-screen, or isn't wide enough to accommodate eight tiles per
      row, the actual number of rows may be different.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1821556
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1821556#c3
    data_sensitivity:
      - interaction
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    send_in_pings:
      - newtab

  sponsored_tiles_configured:
    lifetime: application
    type: quantity
    unit: integer
    description: >
      The number of topsite tiles configured to be shown on newtab.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1862493
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi
    data_sensitivity:
      - technical
    notification_emails:
      - gleonard@mozilla.com
    expires: never
    send_in_pings:
      - newtab

  sponsored_tiles_received:
    lifetime: application
    type: text
    description: >
      The stringified JSON of tiles processed for display (array of objects).
      Includes tiles not displayed and reason for not displaying.
      Fields included: advertiser, provider, display_position,
      display_fail_reason.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi
    data_sensitivity:
      - web_activity
    notification_emails:
      - gleonard@mozilla.com
    expires: never
    send_in_pings:
      - newtab

pocket:
  is_signed_in:
    lifetime: application
    type: boolean
    description: >
      Whether the Firefox user is signed in to Pocket.
      Does not correspond to a pref, so its value is resampled at newtab's
      component init and whenever there is a Discovery Stream user event.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
    data_sensitivity:
      - technical
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    send_in_pings:
      - newtab

  enabled:
    lifetime: application
    type: boolean
    description: >
      Whether Pocket is enabled on the newtab.
      AKA the "Recommended by Pocket" section.
      Corresponds to the value of the
      `browser.newtabpage.activity-stream.feeds.section.topstories` pref.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
    data_sensitivity:
      - technical
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    send_in_pings:
      - newtab

  sponsored_stories_enabled:
    lifetime: application
    type: boolean
    description: >
      Whether Pocket sponsored stories are enabled on the newtab.
      Corresponds to the value of the
      `browser.newtabpage.activity-stream.showSponsored` pref.
      Can be `true` even if pocket.enabled is `false`.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
    data_sensitivity:
      - technical
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    send_in_pings:
      - newtab

  impression:
    type: event
    description: >
      Recorded when a pocket tile is visible to the user.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1854245
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1862670
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1854245
    data_sensitivity:
      - interaction
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
      - sdowne@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
      is_sponsored: &is_sponsored_pocket
        description: Whether the pocket tile was sponsored (has an ad callback).
        type: boolean
      format: &format
        description: For sponsored content only, was it a standard spoc, or a new IAB rectangle spoc. Can be "spoc" or "rectangle"
        type: string
      position: &pocket_position
        description: The position (0-index) of the pocket tile.
        type: quantity
      recommendation_id: &recommendation_id
        description: >
          The id from the Pocket API response that returned the recommendation.
          Like "{61934fe5-fbb0-4f4e-b9dd-7eab5f6ee9cd}".
        type: string
      tile_id: &pocket_tile_id
        description: >
          A content identifier.
          For organic Pocket recommendations it is an opaque id produced by
          Pocket's recommendation systems.
          For sponsored Pocket content it is Kevel's "ad ID".
        type: quantity
      scheduled_corpus_item_id: &scheduled_corpus_item_id
        description: >
          A content identifier.
          For organic Pocket recommendations it is an opaque id produced by
          Pocket's recommendation systems.
          For sponsored Pocket content it is Kevel's "ad ID".
          This is the replacement for tile_id.
        type: string
      received_rank: &received_rank
        description: The rank or order of the recommendation at the time it was sent to the client.
        type: quantity
      recommended_at: &recommended_at
        description: The time in milliseconds the recomendation was recommended at.
        type: quantity
      topic:
        description: The topic of the recommendation. Like "entertainment".
        type: string
      selected_topics:
        description: >
          The list of topics the user selected
        type: string
      is_list_card:
        description: >
          Where the article card is in the list component
        type: boolean
      section:
        description: >
          If click belongs in a section, the name of the section
        type: string
      section_position:
        description: >
          If click belongs in a section, the numberic position of the section
        type: string
    send_in_pings:
      - newtab

  click:
    type: event
    description: >
      Recorded when a pocket tile is clicked.
      Only happens on click. Not on middle-click. Not on "Open in new Tab"-like
      options in the context menu.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1854245
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1862670
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1854245
    data_sensitivity:
      - interaction
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
      - sdowne@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
      is_sponsored: *is_sponsored_pocket
      format: *format
      position: *pocket_position
      recommendation_id: *recommendation_id
      tile_id: *pocket_tile_id
      scheduled_corpus_item_id: *scheduled_corpus_item_id
      received_rank: *received_rank
      recommended_at: *recommended_at
      matches_selected_topic:
        description: >
          Returns value based on if a the topic of the pocket recommendation matches one
          of the user-selected topic categories
        type: string
      topic:
        description: The topic of the recommendation. Like "entertainment".
        type: string
      selected_topics:
        description: >
          The list of topics the user selected
        type: string
      is_list_card:
        description: >
          Where the article card is in the list component
        type: boolean
      section:
        description: >
          If click belongs in a section, the name of the section
        type: string
      section_position:
        description: >
          If click belongs in a section, the numberic position of the section
        type: string
    send_in_pings:
      - newtab

  dismiss:
    type: event
    description: >
      Recorded when a pocket tile is dismissed.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
    data_sensitivity:
      - interaction
    notification_emails:
      - sdowne@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
      is_sponsored: *is_sponsored_pocket
      format: *format
      position: *pocket_position
      recommendation_id: *recommendation_id
      tile_id: *pocket_tile_id
      scheduled_corpus_item_id: *scheduled_corpus_item_id
      received_rank: *received_rank
      recommended_at: *recommended_at
      is_list_card:
        description: >
          Where the article card is in the list component
        type: boolean
      section:
        description: >
          If click belongs in a section, the name of the section
        type: string
      section_position:
        description: >
          If click belongs in a section, the numberic position of the section
        type: string
    send_in_pings:
      - newtab

  save:
    type: event
    description: >
      Recorded when a user decides to save a pocket tile.
      Does not mean it ends up successfully saved.
      Just that the user clicked on "Save to Pocket" in the little pocket
      tile menu.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1854245
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1862670
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1854245
    data_sensitivity:
      - interaction
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
      - mcrawford@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
      is_sponsored: *is_sponsored_pocket
      format: *format
      position: *pocket_position
      recommendation_id: *recommendation_id
      tile_id: *pocket_tile_id
      scheduled_corpus_item_id: *scheduled_corpus_item_id
      received_rank: *received_rank
      recommended_at: *recommended_at
      topic:
        description: The topic of the recommendation. Like "entertainment".
        type: string
      matches_selected_topic:
        description: >
          Returns value based on if a the topic of the pocket recommendation matches one
          of the user-selected topic categories
        type: string
      selected_topics:
        description: >
          The list of topics the user selected
        type: string
      is_list_card:
        description: >
          Where the article card is in the list component
        type: boolean
      section:
        description: >
          If click belongs in a section, the name of the section
        type: string
      section_position:
        description: >
          If click belongs in a section, the numberic position of the section
        type: string
    send_in_pings:
      - newtab

  topic_click:
    type: event
    description: >
      Recorded when a pocket "Popular Topic" is clicked.
      Only happens on click. Not on middle-click. Not on "Open in new Tab"-like
      options in the context menu.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1854245
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1786612
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817105#c11
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1854245
    data_sensitivity:
      - interaction
    notification_emails:
      - anicholson@mozilla.com
      - chutten@mozilla.com
      - mmccorquodale@mozilla.com
      - najiang@mozilla.com
      - lina@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
      topic:
        description: The topic that was clicked on. Like "entertainment".
        type: string
    send_in_pings:
      - newtab

  shim:
    type: text
    lifetime: ping
    description: |
      Opaque partner identifier for a given ad impression or engagement action,
      unique per market and region.
      Pocket
      [proxies requests to ad partners](https://github.com/Pocket/proxy-server/)
      and provides them solely with market, region, and action to generate these
      shims. Thus, though the contents of this field are obscure, they cannot
      identify clients.
      At time of writing this information is a comma-separated trio.
      The first item is an index into the proxy server's list of acceptable http
      endpoints for contacting the ad service. The second item is a
      several-hundred-byte base64-encoded JSON-encoded struct with fields for,
      amongst other things, market and region. The third is unknown, but appears
      to be a signature or checksum.
      This shim should not be sent with the client_id.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1862670
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1862670
    data_sensitivity:
      - stored_content # Required for text type, and to encourage scrutiny
    notification_emails:
      - chutten@mozilla.com
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - spoc

  fetch_timestamp:
    type: datetime
    lifetime: ping
    description: |
      Timestamp of when the spoc was fetched by the client
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1887655
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1887655
    notification_emails:
      - dmueller@mozilla.com
    expires: never
    send_in_pings:
      - spoc

  newtab_creation_timestamp:
    type: datetime
    lifetime: ping
    description: |
      Timestamp of when this instance of the newtab was first visible to the user.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1887655
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1887655
    notification_emails:
      - dmueller@mozilla.com
    expires: never
    send_in_pings:
      - spoc

  thumb_voting_interaction:
    type: event
    description: >
      Recorded when a thumbs up/down on a tile is clicked.
      Only happens on click. Not on middle-click. Not on "Open in new Tab"-like
      options in the context menu.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1902099
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1902099
    data_sensitivity:
      - interaction
    notification_emails:
      - mcrawford@mozilla.com
    expires: never
    extra_keys:
      newtab_visit_id: *newtab_visit_id
      recommendation_id: *recommendation_id
      tile_id: *pocket_tile_id
      thumbs_up:
        description: >
          If the user clicked thumbs up.
        type: boolean
      thumbs_down:
        description: >
          If the user clicked thumbs down.
        type: boolean
      scheduled_corpus_item_id: *scheduled_corpus_item_id
      received_rank: *received_rank
      recommended_at: *recommended_at
      topic:
        description: The topic of the recommendation. Like "entertainment".
        type: string
      is_list_card:
        description: >
          Where the article card is in the list component
        type: boolean
    send_in_pings:
      - newtab

messaging_system:
  event_context_parse_error:
    type: counter
    lifetime: ping
    description: |
      How often we failed to parse event_context as JSON.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - technical
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  event_reason:
    type: string
    lifetime: ping
    description: |
      The event_context's `reason`. Likely something like
      "welcome-window-closed" or "app-shut-down",.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  event_page:
    type: string
    lifetime: ping
    description: |
      The event_context's `page`. Almost always "about:welcome".
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  event_source:
    type: string
    lifetime: ping
    description: |
      The event_context's `source`. Likely something like "primary_button".
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  event_context:
    type: text
    lifetime: ping
    description: |
      The stringified JSON of `event_context`.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - web_activity
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  event_screen_family:
    type: text
    lifetime: ping
    description: |
      A string identifier of the message family derived from the message id
      (e.g. MR_WELCOME_DEFAULT).
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1867627
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - web_activity
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
      - nsauermann@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  event_screen_id:
    type: text
    lifetime: ping
    description: |
      A string identifier of the message screen id
      (e.g. AW_MOBILE_DOWNLOAD).
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1867627
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - web_activity
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
      - nsauermann@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  event_screen_initials:
    type: text
    lifetime: ping
    description: |
      A string identifier of the message screen initials
      (e.g. 'EMAG' for EASY_SETUP, MOBILE_DOWNLOADS, AMO, GRATITUDE).
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1867627
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - web_activity
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
      - nsauermann@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  event_screen_index:
    type: quantity
    unit: integer
    lifetime: ping
    description: |
      A number identifier of the screen index in a sequence of screens
      (e.g. 0 for first message).
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - web_activity
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
      - nsauermann@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  message_id:
    type: text
    lifetime: ping
    description: |
      A string identifier of the message in Activity Stream Router.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - web_activity
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  event:
    type: string
    description: >
      The type of event. Any user defined string
      (e.g. “IMPRESSION”, “CLICK_BUTTON”, "INDEXEDDB_OPEN_FAILED", “SESSION_END”)
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  ping_type:
    type: string
    description: >
      Type of event the ping is capturing.
      e.g. "cfr", "onboarding"
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  source:
    type: string
    description: >
      The source of the interaction described by the other metrics.
      e.g. "frecent_links", "newtab", "CFR"
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  client_id:
    type: uuid
    lifetime: ping
    description: |
      The client_id according to Telemetry.
      Might not always have a value due to policy around specific types of
      ping being sent. Value may be the canary client id
      `c0ffeec0-ffee-c0ff-eec0-ffeec0ffeec0`
      in pings near when the data upload pref is disabled (if Telemetry gets
      to go first), or between when a client_id has been removed and when it
      has been regenerated.
      Present only in some circumstances (see
      [bug 1484035]https://bugzilla.mozilla.org/show_bug.cgi?id=1484035)).
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1755549
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1484035
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1755549
    data_sensitivity:
      - technical
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  locale:
    type: string
    lifetime: ping
    description: >
      The locale as supplied to the messaging system by
      `Services.locale.appLocaleAsBCP47`.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - technical
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  browser_session_id:
    type: uuid
    lifetime: ping
    # Disable yamllint for long lines.
    # yamllint disable
    description: >
      The Legacy Telemetry browser "session id".
      Identifies a specific period from application start to shutdown.
      See [the "main" ping docs](https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/data/main-ping.html)
      for details.
    # yamllint enable
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - technical
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  impression_id:
    type: uuid
    lifetime: ping
    description: >
      The unique impression identifier for a specific client.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - technical
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  bucket_id:
    type: string
    lifetime: ping
    description: >
      A name shared between multiple messages that may individually be too
      targetted.
      e.g. a message that gets shown on specific websites or a message asking
      about personal information.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - technical
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  addon_version:
    type: string
    lifetime: ping
    description: >
      Used to hold the system addon's version,
      now is almost certainly an echo of the app's build id.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - technical
    notification_emails:
      - pmcmanis@mozilla.com
      - dmosedale@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  unknown_key_count:
    type: counter
    description: |
      The sum of all unknown keys counted.
      Useful for testing.
      Can be removed after bug 1600008 is resolved.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - technical
    notification_emails:
      - chutten@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  unknown_keys:
    type: labeled_counter
    description: |
      Ping keys supplied to the messaging system for which
      we did not have a corresponding metric mapped to how often they attempted
      to be recorded.
      You may have forgotten to define an appropriate metric in
      `browser/components/newtab/metrics.yaml`.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - technical
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  glean_ping_for_ping_failures:
    type: counter
    description: |
      How often something went awry within
      `AboutWelcome.submitGleanPingForPing`, preventing ping submission.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - technical
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
      - chutten@mozilla.com
    expires: never
    send_in_pings:
      - metrics

  invalid_nested_data:
    type: labeled_counter
    description: |
      We received a ping with non-scalar data on a field of this name.
      If this is existing pre-PingCentre-replacement data, you may need to
      augment the logic in
      `AboutWelcome.submitGleanPingForPing` like the other `handledKeys`.
      If this is for new, post-PingCentre-replacement data, you should
      probably prefer a flat structure.
      If you're unsure, please ask in
      [the #glean channel](https://chat.mozilla.org/#/room/#glean:mozilla.org).
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - technical
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
      - chutten@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system


messaging_system.attribution:
  source:
    type: string
    lifetime: ping
    description: |
      Attribution's source, possibly derived from the utm parameter of the same
      name.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  medium:
    type: string
    lifetime: ping
    description: |
      Attribution's medium, possibly derived from the utm parameter of the same
      name.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  campaign:
    type: string
    lifetime: ping
    description: |
      Attribution's campaign, possibly derived from the utm parameter of the
      same name.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  content:
    type: string
    lifetime: ping
    description: |
      Attribution's content, possibly derived from the utm parameter of the
      same name.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  experiment:
    type: string
    lifetime: ping
    description: |
      Attribution's experiment key.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  variation:
    type: string
    lifetime: ping
    description: |
      Attribution's variation key.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  ua:
    type: string
    lifetime: ping
    description: |
      Attribution's ua key.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  dltoken:
    type: string
    lifetime: ping
    description: |
      String representation of the dltoken identifying the particular
      installer used to install this Firefox.
      Likely a UUID, if present.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  msstoresignedin:
    type: string
    lifetime: ping
    description: |
      Either the string "true" or the string "false" to indicate whether the
      attributed install came from the Microsoft store and, if so, whether the
      user was signed in at the time.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1756209
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1756209
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  dlsource:
    type: string
    lifetime: ping
    description: |
      Mozilla-specific download "source" name. Could be something like
      "mozillaci" to identify that the installer came from
      `{archive|ftp}.mozilla.org`.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1819997
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1819997
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - interaction
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

  unknown_keys:
    type: labeled_counter
    description: |
      Attribution keys supplied to the messaging system for which
      we did not have a corresponding metric, and the count of how
      often that happened.
      Either add this key to a list of known attribution keys in
      `AboutWelcomeTelemetry` to suppress or define an appropriate metric in
      `browser/components/newtab/metrics.yaml` to collect.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1825863
    data_sensitivity:
      - technical
    notification_emails:
      - dmosedale@mozilla.com
      - pmcmanis@mozilla.com
    expires: never
    send_in_pings:
      - messaging-system

top_sites: # Replacement for PingCentre "topsites-impression|click" pings.
  ping_type:
    type: string
    description: >
      The ping's type. In other situations might be designated by an event's
      name or an interaction field. E.g. "topsites-impression",
      "topsites-click".
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - top-sites

  position:
    type: quantity
    unit: topsite position
    description: >
      The position (1-based) of the topsites item being interatcted with.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - top-sites

  source:
    type: string
    description: >
      The source of the interaction. Always set to "newtab".
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - top-sites

  tile_id:
    type: string
    description: >
      String-encoded number for the tile's sponsored tile id.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - top-sites

  reporting_url:
    type: url
    description: >
      The url to report this interaction to.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - web_activity
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - top-sites

  advertiser:
    type: string
    description: >
      The name of the advertiser providing the sponsored TopSite.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
      - web_activity
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - top-sites

  context_id:
    type: uuid
    description: >
      An identifier to identify users for Contextual Services user interaction pings.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - technical
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - top-sites

activity_stream:
  end_session:
    type: event
    description: >
      This is recorded with every session ended in Activity Stream.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.end#session.
    bugs:
      - https://bugzil.la/1429497
      - https://bugzil.la/1429489
    data_reviews:
      - https://bugzil.la/1429497
      - https://bugzil.la/1429489
    notification_emails:
      - najiang@mozilla.com
      - msamuel@mozilla.com
    expires: never
    extra_keys:
      value:
        description: >
          The session duration. Mirrors to the Legacy Telemetry
          event's `value` parameter.
        type: quantity
      addon_version:
        description: >
          The Activity Stream addon version.
        type: string
      session_id:
        description: >
          The ID of the Activity Stream session in which the event occurred
        type: string
      page:
        description: >
          about:home or about_newtab - the page where the event occurred
        type: string
      user_prefs:
        description: >
          An integer representaing a user's A-S settings.
        type: quantity
    telemetry_mirror: Activity_stream_End_Session

  event_archive_from_pocket:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#ARCHIVE_FROM_POCKET.
    bugs: &activity_stream_event_bugs
      - https://bugzil.la/1429497
      - https://bugzil.la/1429489
      - https://bugzil.la/1514732
    data_reviews: &activity_stream_event_data_reviews
      - https://bugzil.la/1429497
      - https://bugzil.la/1429489
      - https://bugzil.la/1514732
    notification_emails: &activity_stream_event_emails
      - najiang@mozilla.com
      - msamuel@mozilla.com
      - rrosario@mozilla.com
    expires: never
    extra_keys: &activity_stream_event_extra
      value:
        description: >
          The `value` of the event. Mirrors to the Legacy Telemetry
          event's `value` parameter.
        type: string
      addon_version:
        description: >
          The Activity Stream addon version.
        type: string
      session_id:
        description: >
          The ID of the Activity Stream session in which the event occurred
        type: string
      page:
        description: >
          about:home or about_newtab - the page where the event occurred
        type: string
      user_prefs:
        description: >
          An integer representaing a user's A-S settings.
        type: quantity
      action_position:
        description: >
          The index of card receiving interactions.
        type: quantity
    telemetry_mirror: Activity_stream_Event_ArchiveFromPocket

  event_block:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#BLOCK.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_Block

  event_bookmark_add:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#BOOKMARK_ADD.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_BookmarkAdd

  event_bookmark_delete:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#BOOKMARK_DELETE.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_BookmarkDelete

  event_click:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#CLICK.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_Click

  event_click_privacy_info:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#CLICK_PRIVACY_INFO.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_ClickPrivacyInfo

  event_close_newtab_prefs:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#CLOSE_NEWTAB_PREFS.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_CloseNewtabPrefs

  event_show_personalize:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#SHOW_PERSONALIZE.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_ShowPersonalize

  event_hide_personalize:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#HIDE_PERSONALIZE.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_HidePersonalize

  event_delete:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#DELETE.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_Delete

  event_delete_from_pocket:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#DELETE_FROM_POCKET.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_DeleteFromPocket

  event_delete_confirm:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#DELETE_CONFIRM.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_DeleteConfirm

  event_dialog_cancel:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#DIALOG_CANCEL.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_DialogCancel

  event_dialog_open:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#DIALOG_OPEN.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_DialogOpen

  event_drag:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#DRAG.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_Drag

  event_drop:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#DROP.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_Drop

  event_impression:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#IMPRESSION.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_Impression

  event_migration_cancel:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#MIGRATION_CANCEL.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_MigrationCancel

  event_migration_start:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#MIGRATION_START.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_MigrationStart

  event_open_newtab_prefs:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#OPEN_NEWTAB_PREFS.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_OpenNewtabPrefs

  event_open_new_window:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#OPEN_NEW_WINDOW.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_OpenNewWindow

  event_open_private_window:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#OPEN_PRIVATE_WINDOW.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_OpenPrivateWindow

  event_pin:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#PIN.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_Pin

  event_pocket_thumbs_down:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#POCKET_THUMBS_DOWN.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_PocketThumbsDown

  event_pocket_thumbs_up:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#POCKET_THUMBS_UP.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_PocketThumbsUp

  event_fakespot_click:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#FAKESPOT_CLICK.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_FakespotClick

  event_fakespot_category:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#FAKESPOT_CATEGORY.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_FakespotCategory

  event_pref_changed:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#PREF_CHANGED.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_PrefChanged

  event_preview_request:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#PREVIEW_REQUEST.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_PreviewRequest

  event_save_to_pocket:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#SAVE_TO_POCKET.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_SaveToPocket

  event_search:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#SEARCH.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_Search

  event_search_edit_add:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#SEARCH_EDIT_ADD.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_SearchEditAdd

  event_search_edit_close:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#SEARCH_EDIT_CLOSE.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_SearchEditClose

  event_search_edit_delete:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#SEARCH_EDIT_DELETE.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_SearchEditDelete

  event_search_handoff:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#SEARCH_HANDOFF.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_SearchHandoff

  event_show_privacy_info:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#SHOW_PRIVACY_INFO.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_ShowPrivacyInfo

  event_skipped_signin:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#SKIPPED_SIGNIN.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_SkippedSignin

  event_submit_email:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#SUBMIT_EMAIL.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_SubmitEmail

  event_disclaimer_acked:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#DISCLAIMER_ACKED.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_DisclaimerAcked

  event_menu_add_search:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#MENU_ADD_SEARCH.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_MenuAddSearch

  event_menu_add_topsite:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#MENU_ADD_TOPSITE.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_MenuAddTopsite

  event_menu_collapse:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#MENU_COLLAPSE.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_MenuCollapse

  event_menu_expand:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#MENU_EXPAND.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_MenuExpand

  event_menu_manage:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#MENU_MANAGE.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_MenuManage

  event_menu_move_down:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#MENU_MOVE_DOWN.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_MenuMoveDown

  event_menu_move_up:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#MENU_MOVE_UP.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_MenuMoveUp

  event_menu_privacy_notice:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#MENU_PRIVACY_NOTICE.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_MenuPrivacyNotice

  event_menu_remove:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#MENU_REMOVE.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_MenuRemove

  event_top_sites_edit:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#TOP_SITES_EDIT.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_TopSitesEdit

  event_top_sites_edit_close:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#TOP_SITES_EDIT_CLOSE.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_TopSitesEditClose

  event_topsite_sponsor_info:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#TOPSITE_SPONSOR_INFO.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_TopsiteSponsorInfo

  event_unpin:
    type: event
    description: >
      This is recorded with every user interaction on Activity Stream
      elements.
      This event was generated to correspond to the Legacy Telemetry event
      activity_stream.event#UNPIN.
    bugs: *activity_stream_event_bugs
    data_reviews: *activity_stream_event_data_reviews
    notification_emails: *activity_stream_event_emails
    expires: never
    extra_keys: *activity_stream_event_extra
    telemetry_mirror: Activity_stream_Event_Unpin

deletion.request:
  impression_id:
    type: string
    description: >
      An identifier used by user interaction pings in Pocket/newtab and
      Messaging System.
      This metric was generated to correspond to the Legacy Telemetry
      scalar deletion.request.impression_id.
    bugs:
      - https://bugzil.la/1602064
    data_reviews:
      - https://bugzil.la/1602064
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings: ["deletion-request"]
    telemetry_mirror: DELETION_REQUEST_IMPRESSION_ID

  context_id:
    type: string
    description: >
      An identifier to identify users for Contextual Services user
      interaction pings.
      This metric was generated to correspond to the Legacy Telemetry
      scalar deletion.request.context_id.
    bugs:
      - https://bugzil.la/1729474
    data_reviews:
      - https://bugzil.la/1729474
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings: ["deletion-request"]
    telemetry_mirror: DELETION_REQUEST_CONTEXT_ID

contextual.services.topsites:
  impression:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user has viewed the
      sponsored TopSites on the newtab page. The key is a combination of
      the source and the placement of the TopSites tile (1-based). such as
      'urlbar_1', 'newtab_2'.
      This metric was generated to correspond to the Legacy Telemetry
      scalar contextual.services.topsites.impression.
    bugs:
      - https://bugzil.la/1688698
    data_reviews:
      - https://bugzil.la/1688698
    notification_emails:
      - najiang@mozilla.com
    expires: never
    telemetry_mirror: CONTEXTUAL_SERVICES_TOPSITES_IMPRESSION

  click:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user has clicked on the
      sponsored TopSites on the newtab page. The key is a combination of
      the source and the placement of the TopSites tile (1-based). such as
      'urlbar_1', 'newtab_2'.
      This metric was generated to correspond to the Legacy Telemetry
      scalar contextual.services.topsites.click.
    bugs:
      - https://bugzil.la/1688698
    data_reviews:
      - https://bugzil.la/1688698
    notification_emails:
      - najiang@mozilla.com
    expires: never
    telemetry_mirror: CONTEXTUAL_SERVICES_TOPSITES_CLICK
